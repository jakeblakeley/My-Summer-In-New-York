"use strict";var pathObj={ideo:{strokepath:[{path:"   M392.129,146c-21.5,1.75-47.023,6.5-62.137,11s21.63-3.75,29.63-5.25s8.257,63.25,7.257,66.25s-29.909,7.033-30.455,8.017   C335.879,227,390.629,212.5,401.129,215",duration:500},{path:"   M425.879,138c-0.5-5,5.818,66.971,9.4,68.965c8.6,4.785,35.266-1.965,47.266-39.521c9.986-31.254-5.332-49.398-62.666-26.444",duration:500},{path:"   M409.546,239.389C399.213,242.334,346.213,256,344.879,258c-1.333,2,9.666,66.791,12.334,67.562   c2.666,0.771,56-14.229,60.333-15.562",duration:400},{path:"   M398.546,278.557c-7.333,0.11-52.333,13.443-54,14.777",duration:100},{path:"   M466.213,230.667c-31.105,8.722-33.422,65.442-8.422,73.109s37.887-9.243,44.469-23.22c17.816-37.831-10.047-60.557-48.047-46.89",duration:400}],dimensions:{width:600,height:486}}};$(document).ready(function(){function o(o,s,t){return k=v===!0?"translate3d("+o+"px, "+s+"px, "+t+"px)":"translateX("+o+"px) translateY("+s+"px) translateZ("+t+"px)"}function s(){$(window).scrollTop($(window).scrollTop()+1)}function t(){O.css({transform:o(0,0,0),opacity:"1"}),A.css("opacity","1"),S.css("transform",o(0,0,0)),q.css("transform",o(0,0,0)),Y.css({transform:o(0,0,0),opacity:"0"}),N.css("transform","scale(1)")}function e(){O.css({opacity:"0"}),A.css("opacity","0"),S.css("transform",o(0,-C,0)),Y.css({transform:o(0,0,0),opacity:"1"})}function r(){q.css("transform",o(0,0,0)),N.css("transform","scale(1)")}function n(){q.css("transform",o(0,-C,0))}function a(){var s=(.3*C).toFixed(2);Z.css("transform",o(0,s,0)+"rotate(-50deg) scale(0.3)"),$(".coffee, .stickyNotes, .marker1, .woodDesk").css("transform",o(0,0,0)),$(".sceneTwoText, .backpage1, .backpage2, .marker2").css("transform",o(0,0,0)+"rotate(0deg)")}function i(){var s=(C*-.45).toFixed(2),t=(.2*b).toFixed(2),e=(.45*C).toFixed(2),r=(.15*b).toFixed(2),n=(.5*C).toFixed(2),a=-480;B.css("transform",o(t,s,0)),j.css("transform",o(r,e,0)),X.css("transform",o(t,n,0)),P.css("transform",o(a,0,0)+"rotate(-2deg)"),L.css("transform",o(-24,0,0)+"rotate(-3deg)"),E.css("transform",o(-32,0,0)+"rotate(-12deg)"),R.css("transform",o(-64,72,0)+"rotate(-13deg)"),z.css("transform",o(0,-C,0)),N.css("transform","scale(0.94)")}function c(){Q.css("transform","rotateY(-90deg)"+o(0,0,0)),U.css({transform:"rotateY(-90deg)",opacity:"0"}),$(".moon, .statue, .boat, .sceneThreeText").css("transform",o(0,0,0))}function d(){var s=(C*-.7).toFixed(2),t=(.25*b).toFixed(2);Z.css("transform",o(t,s,0)+"rotate(0deg) scale(1)"),U.css({transform:"rotateY(0deg)",opacity:"0"})}function m(){$(".radioCityLeft, .radioCityRight, .taxiSmall, .taxiLarge").css("transform",o(0,0,0)),ss.hide()}function f(){var s=(b*-.6).toFixed(2),t=(-1*b).toFixed(2),e=(-1.15*b).toFixed(2),r=(.05*b).toFixed(2),n=(b*-.1).toFixed(2),a=(b*-.15).toFixed(2),i=(b*-.2).toFixed(2);_.css("transform",o(s,0,0)),V.css("transform",o(t,0,0)),os.css("transform",o(e,0,0)),I.css("transform",o(r,0,0)),J.css("transform",o(n,0,0)),K.css("transform",o(a,0,0)),Q.css("transform",o(i,0,0)),console.log("scenefourend")}function l(){es.css("top","90%").removeClass("animatePlane"),rs.css({transform:o(0,0,0),opacity:"0"}),ts.css("opacity","0")}function u(){es.css("top","0px").addClass("animatePlane"),rs.css({transform:o(0,0,0),opacity:"1"})}function w(){t(),a(),c(),m(),l(),gs=!1,vs=!1,ks=!1,Ts=!1,Cs=!1,Fs=!0}function p(){a(),c(),m(),l(),Fs=!1,vs=!1,ks=!1,Ts=!1,Cs=!1,gs=!0}function h(){e(),n(),c(),m(),l(),Fs=!1,gs=!1,ks=!1,Ts=!1,Cs=!1,vs=!0}function x(){e(),n(),i(),m(),l(),Fs=!1,gs=!1,vs=!1,Ts=!1,Cs=!1,ks=!0}function y(){e(),n(),i(),d(),l(),Fs=!1,gs=!1,vs=!1,ks=!1,Cs=!1,Ts=!0}function F(){e(),n(),i(),d(),f(),Fs=!1,gs=!1,vs=!1,ks=!1,Ts=!1,Cs=!0}function g(){var s=window.pageYOffset;if(D===s)return T(g),!1;if(D=s,T(g),0>=s)Fs||w();else if(as>=s){var t=s/as*M,e=(s*-.25).toFixed(2),r=((.65*C-s)/(.65*C)).toFixed(2),n=((C-s)/C).toFixed(2),a=(-s-t).toFixed(2),i=(as*-.1+s*-.9-t).toFixed(2);O.css({transform:o(0,e,0),opacity:r}),A.css("opacity",n),S.css("transform",o(0,a,0)),q.css("transform",o(0,i,0)),Y.css("opacity","0"),gs||p()}else if(s>=C&&cs>=s){var d=(s-C)/C,m=(d*C*-.3+.3*C).toFixed(4),f=(d*C*-.45).toFixed(2),l=(.2*d*b).toFixed(2),u=(.45*d*C).toFixed(2),v=(.15*d*b).toFixed(2),k=(.5*d*C).toFixed(2),W=(-480*d).toFixed(2);B.css("transform",o(l,f,0)),j.css("transform",o(v,u,0)),X.css("transform",o(l,k,0)),P.css("transform",o(W,0,0)+"rotate("+-2*d+"deg)"),L.css("transform",o(-24*d,0,0)+"rotate("+-3*d+"deg)"),E.css("transform",o(-32*d,0,0)+"rotate("+-12*d+"deg)"),R.css("transform",o(-64*d,72*d,0)+"rotate("+-13*d+"deg)"),Z.css("transform",o(0,m,0)+"rotate(-50deg) scale(0.3)"),vs||h()}else if(s>=cs&&ds>=s){var H=(s-cs)/C,is=(.7*H+.3).toFixed(4),ys=(.25*H*b).toFixed(2),Ms=(50*H-50).toFixed(2),Ds=(H*C*-.7).toFixed(2);Z.css("transform",o(ys,Ds,0)+"rotate("+Ms+"deg) scale("+is+")"),ks||x()}else if(s>=ds&&ms>=s){var As=(s-ds)/C,Os=(.05*As*b).toFixed(2),Ss=(As*b*-.1).toFixed(2),qs=(As*b*-.15).toFixed(2),Ns=(As*b*-.2).toFixed(2),Ys=(As*b*-.6).toFixed(2),zs=(-1*As*b).toFixed(2),Ps=(-1.15*As*b).toFixed(2);I.css("transform",o(Os,0,0)),J.css("transform",o(Ss,0,0)),K.css("transform",o(qs,0,0)),G.css("transform",o(Ns,0,0)),Q.css("transform",o(Ns,0,0)),_.css("transform",o(Ys,0,0)),V.css("transform",o(zs,0,0)),ss.show(),os.css("transform",o(Ps,0,0)),ns.hide(),Ts||y()}else if(s>=ms&&fs>=s){var Es=((s-ms)/(.6*C)).toFixed(2);ts.css("opacity",Es),es.addClass("animatePlane"),ns.show(),Cs||F()}else if(s>=fs&&ls>=s){var Ls=(s-(ms+.6*C))/(.4*C),Rs=(-90*Ls+90).toFixed(2);es.css("top",Rs+"%"),es.addClass("animatePlane"),ts.css("opacity","1")}if(s>=us&&C>=s){var Bs=(s-as)/M,js=(-(s-as-M)).toFixed(2);Y.css({transform:o(js,0,0),opacity:Bs})}else if(s===C)Y.css("opacity","1");else if(s>=C&&ws>=s){var Ws=(s-C)/(.4*C),Xs=(Ws*-C).toFixed(4),Zs=(.06*-Ws+1).toFixed(4);z.css("transform",o(0,Xs,0)),N.css("transform","scale("+Zs+")")}else if(s>=ws&&ps>=s)z.css("transform",o(0,-C,0));else if(s>=ps&&hs>=s)z.css("transform",o(0,-C,0)),bs||($("#ideo").lazylinepainter({svgData:pathObj,strokeWidth:8,onComplete:$("#ideo").css({transform:"scale("+.45*C/486+")","transform-origin":"top left"}),strokeColor:"#59534f"}).lazylinepainter("paint"),bs=!0);else if(s>=hs&&$s>=s)c();else if(s>=$s&&ds>=s){var Gs=(s-ds+M)/M,Hs=(-90*Gs+90).toFixed(2),Is=(-1*Gs+1).toFixed(2);Q.css("transform","rotateY("+Hs+"deg)"),U.css({transform:"rotateY("+Hs+"deg)",opacity:Is})}else if(s>=xs&&ls>=s){var Js=((s-(ms+.4*C))/(.6*C)).toFixed(2),Ks=(150*Js-150).toFixed(2);rs.css({transform:o(0,Ks,0),opacity:Js})}}var v=!1,k=0;Modernizr.csstransforms3d?v=!0:Modernizr.csstransforms?v=!1:alert("Sorry, but your browser does not support the technology used in this website. Try upgrading your browser: http://browsehappy.com/"),function(){for(var o=0,s=["webkit","moz"],t=0;t<s.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[s[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[s[t]+"CancelAnimationFrame"]||window[s[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(s,t){var e=(new Date).getTime(),r=Math.max(0,16-(e-o)),n=window.setTimeout(function(){s(e+r)},r);return o=e+r,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(o){clearTimeout(o)})}();var T=window.requestAnimationFrame,C=$(window).height(),b=$(window).width(),M=200,D=-1;M>.25*$(window).height()&&(M=.2*$(window).height());var A=$(".clouds img"),O=$(".titleContainer, .titleScroll"),S=$(".skyscrapers"),q=$(".street"),N=$(".sceneOne"),Y=$(".sceneOneText"),z=$(".woodDesk"),P=$(".sceneTwoText"),E=$(".backpage2"),L=$(".backpage1"),R=$(".marker2"),B=$(".coffee"),j=$(".stickyNotes"),W=$(".ideo"),X=$(".marker1"),Z=$(".sceneThree"),G=$(".sceneThreeText"),H=$(".phone"),I=$(".moon"),J=$(".statue"),K=$(".boat"),Q=$(".skylineBackground"),U=$(".screenflash"),V=$(".radioCityLeft, .radioCityRight, .sceneFourText"),_=$(".taxiSmall"),os=$(".taxiLarge"),ss=$(".radioCityRight, .sceneFourText"),ts=$(".skyBackground"),es=$(".plane"),rs=$(".sceneFiveText"),ns=$(".sceneFive, .sceneFiveText"),as=C-M,is=$("img.street").width(),cs=2*C,ds=3*C,ms=4*C,fs=ms+.6*C,ls=5*C,us=C-M,ws=C+.4*C,ps=cs-4,hs=cs+4,$s=ds-M,xs=ms+.4*C,ys=1.25*C*-.96;H.css("transform",o(ys,0,0));var Fs=!1,gs=!1,vs=!1,ks=!1,Ts=!1,Cs=!1,bs=!1;s(),$(window).resize(function(){C=$(window).height(),b=$(window).width(),as=C-M,is=$("img.street").width(),cs=2*C,ds=3*C,ms=4*C,fs=ms+.6*C,ls=5*C,us=C-M,ws=C+.4*C,ps=cs-4,hs=cs+4,$s=ds-M,xs=ms+.4*C,ys=1.25*C*-.96,H.css("transform",o(ys,0,0)),$("#ideo").css({transform:"scale("+.45*C/486+")","transform-origin":"top left"})}),g(),$(document).scrollsnap({snaps:".scrollsnap",proximity:M,duration:400})}),$(document).ready(function(){function o(){var o=$("html, body"),s=$(window).height(),t=$(window).scrollTop(),e=Math.ceil((t+20)/s)*s;o.on("scroll mousedown DOMMouseScroll mousewheel",function(s){(s.which>0||"mousedown"===s.type||"mousewheel"===s.type)&&o.stop().off("scroll mousedown DOMMouseScroll mousewheel keyup")}),o.stop().animate({scrollTop:e},1600,"myEasing")}function s(){var o=$("html, body"),s=$(window).height(),t=$(window).scrollTop(),e=Math.floor((t-20)/s)*s;o.on("scroll mousedown DOMMouseScroll mousewheel",function(s){(s.which>0||"mousedown"===s.type||"mousewheel"===s.type)&&o.stop().off("scroll mousedown DOMMouseScroll mousewheel keyup")}),o.stop().animate({scrollTop:e},1600,"myEasing")}$("html").click(function(){$(".showNav, nav").removeClass("slideout")}),$(".showNav").click(function(o){o.stopPropagation(),$(".showNav, nav").toggleClass("slideout")}),$("nav").click(function(o){o.stopPropagation()}),$.easing.myEasing=function(o,s,t,e,r){return e*((s=s/r-1)*s*s+1)+t},$("nav li").click(function(){var o=$("html, body"),s=$(this).index(),t=$(window).height()*s;o.on("scroll mousedown DOMMouseScroll mousewheel",function(s){(s.which>0||"mousedown"===s.type||"mousewheel"===s.type)&&o.stop().off("scroll mousedown DOMMouseScroll mousewheel keyup")}),o.stop().animate({scrollTop:t},1600,"myEasing"),$(".showNav, nav").removeClass("slideout")}),$(".scrollNext").click(function(){o()}),$(document).keyup(function(t){var e=$(window).height(),r=$(window).scrollTop(),n=$("html, body");40===t.keyCode||39===t.keyCode?o():(38===t.keyCode||37===t.keyCode)&&s(),t.preventDefault()}),$(".billboardTop, .billboardBottom").addEventListener("touchstart",function(o){o.preventDefault()})});